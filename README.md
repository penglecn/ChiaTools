# 介绍
ChiaTools是Chia官方钱包P图功能的替代品，提供了比官方钱包更简单更方便更实用的P图功能。同时集成了HPool和火币矿池挖矿功能。

ChiaTools是免费的开源软件，同时欢迎各位开发者朋友们一起贡献代码，加入QQ群 926625265 来一起交流和完善ChiaTools。

近期发现有人在利用该软件进行着非法牟利。再次提醒，该软件为免费软件，所有类似的收费软件都为非法。

## 下载地址
https://gitee.com/devteamcn/chia-tools/releases

下载解压后，进入目录找到ChiaTools.exe，双击启动。

# 功能亮点
- 可以高效率的并发P图
- 支持chia-plotter多线程P图命令行
- 支持自动批量创建任务，根据系统资源自动分配内存和线程
- P图任务可以自动选择最终目录，无需担心磁盘会满导致任务失败
- P图过程可以随时暂停和继续，可以自定义暂停时间
- 任务可以延迟启动，任务之间可以错开高峰，只需一次配置即可全自动P图
- 集成了HPool和火币挖矿程序，当挖矿程序异常或崩溃时会自动重启程序
- 不索要助记词，当安装了Chia钱包软件并创建了钱包，会自动获取公钥
- 失败的任务在删除任务时自动删除临时文件
- 当P图最后一步拷贝文件前，自动开始下一个任务，无需担心机械硬盘阻塞影响P图速度
- P图执行过程中可随时修改配置，配置完后下个任务生效
- P图命令行可自由选择，选择多线程P图程序，内置P图程序，或官方钱包命令行
## 软件界面
### P图任务
![image](https://gitee.com/devteamcn/chia-tools/raw/master/images/plot04.png)
### 硬盘
![image](https://gitee.com/devteamcn/chia-tools/raw/master/images/folder02.png)
### 创建P图任务
![image](https://gitee.com/devteamcn/chia-tools/raw/master/images/create05.png)
### 矿池挖矿
![image](https://gitee.com/devteamcn/chia-tools/raw/master/images/mine02.png)

# 手工打包
- 安装python  
ChiaTools打包需要安装python3.7 64位版本。
- 安装依赖  
```shell
pip install -r requirements.txt
```
- 打包
```shell
./build.bat
```
打包结果存放在dist目录中。

# 使用说明
## 配置硬盘
首先要配置硬盘，在硬盘界面里，将所有的固态硬盘和机械硬盘分别添加到对应的列表中。
## 创建P图任务
创建单个并发任务
![image](https://gitee.com/devteamcn/chia-tools/raw/master/images/create08.png)
批量创建并发任务
![image](https://gitee.com/devteamcn/chia-tools/raw/master/images/create07.png)

### P图程序
P图命令行支持三种，多线程chia_plot.exe、内置的ProofOfSpace.exe、官方钱包chia.exe
#### 多线程chia_plot.exe
多线程chia_plot.exe是传说可以一小时一张图的命令行程序。至于使用该程序和官方程序P出来的图是什么区别，仍然会有争议，不过目前可以被官方钱包和各矿池识别。
#### 内置的ProofOfSpace.exe
内置的ProofOfSpace.exe是chia官方提供的开源代码编译出来的P图程序，和钱包chia.exe本质上是使用的相同代码，但是命令行参数不同。当在没有安装钱包软件的电脑上可以使用该程序。
#### 官方钱包chia.exe
官方钱包chia.exe是只有安装了Chia钱包软件才会有，所在位置是
C:\Users\Administrator\AppData\Local\chia-blockchain\app-1.1.7\resources\app.asar.unpacked\daemon\chia.exe

### 临时目录
可选择在硬盘界面中配置的固态硬盘。当选择自动，将进入批量创建任务模式。
### 第二临时目录
当勾选第二临时目录，需要选择第二个临时目录，也可以手动选择目录。

第二目录通常与最终目录在同一个硬盘，当任务完成之后可以直接在最终盘生成plot文件，而省去了移动文件的开销。

一般不建议设置第二临时目录，因为虽然省去了移动文件的时间，但是在机械硬盘上生成文件仍然很花时间。而在移动文件发生前，软件会自动开始下一轮任务，不用等待移动文件的时间。

当你正在使用ramdisk，可以将第二目录设置为ramdisk目录，可以节省大量的固态硬盘写入。
### 最终目录
默认选择自动。在选择自动时，软件会在开始任务前自动选择空闲的硬盘，当没有可用的空闲硬盘时，任务会停止。

也可以指定最终目录，当指定的硬盘空间不够时，任务会停止
### fpk和ppk
如果你安装了Chia钱包软件并且创建了钱包，软件会自动获取fpk和ppk。如果没有安装钱包，请使用第三方工具（如：HPool提供的签名软件等）来生成。
### Plot大小
默认选择k32，注意每种所需的临时文件大小是不同的。

当选择了多线程命令行时，该选项不可用。
### 最大内存
默认内存是4608MiB，可自定义大小。注意要合理分配内存，记得预留内存给操作系统，以免造成P图失败。

当选择了多线程命令行时，该选项不可用。
### 线程数
默认线程数是2，可根据CPU线程数自由配置。
### 桶数
默认桶数是128，范围是16-128。

当选择了多线程命令行，默认桶数是256，范围是16-65536。
### 禁止位域
默认是不禁止。位域是利用了CPU的一种特性，可大大提高P图效率。如果你的CPU不支持这种特性，需要禁止位域。

当选择了多线程命令行时，该选项不可用。
### 指定数量
如果不指定数量，会不停的P图直到硬盘满。

如果指定了数量，会只P指定的数量的图。注意这些任务数量是按顺序执行，不是并发执行。如果要并发执行，需要创建多条任务。
### 延迟时间
如果不设置延迟时间，任务会立即开始。如果指定了延迟时间，会等待这个时间后自动开始。

如果你想让同一个固态硬盘下的多个任务错开高峰，可以自定义延迟时间来运行任务。
### 批量创建任务
当点击批量创建任务按钮，或者临时目录选择自动时，会进入批量创建任务界面。

自动批量创建任务，会根据系统的内存、CPU线程数、固态硬盘的容量，自动创建多条任务，每条任务自动分配内存和线程数和延迟时间。
#### 预留系统内存
预留系统内存是自动批量任务时，预留的内存，默认是4G左右。当你的系统除了P图还要运行其他软件时，需要手动调整。
## P图任务管理
右键一个正在执行的P图任务，会弹出下面菜单。

当任务没有指定数量

![image](https://gitee.com/devteamcn/chia-tools/raw/master/images/menu03.png)

当任务指定了数量

![image](https://gitee.com/devteamcn/chia-tools/raw/master/images/menu04.png)
### 查看日志
查看日志可以查看任务输出的实时日志内容。
### 编辑
![image](https://gitee.com/devteamcn/chia-tools/raw/master/images/edit02.png)
编辑任务可以在任务运行过程中修改配置，修改之后会在下个任务执行时生效。
### 下一轮任务停止
当任务没有指定数量，会不停的P下去。此时如果要停止，选择下一轮任务停止，会在当前任务完成后结束。

当需要重启计算机或切换软件版本时，该功能会有用。
### 增加 / 减少数量
当任务指定了数量，可以动态的增加和减少数量。
### 停止
会强制停止正在运行的任务，注意停止后无法恢复。
### 暂停 / 继续
在P图任务执行过程中可随时暂停任务，暂停的过程中会停止硬盘的读写，CPU占用为0。点击继续会恢复运行。

可以指定暂停时间30分钟、1小时、2小时、3小时、4小时。到时间后会自动继续任务。
### 浏览临时文件
点击后会跳转到该任务的临时文件所在的目录。
## P图任务辅助功能
在P图任务界面的下方，会有任务数量的限制。
![image](https://gitee.com/devteamcn/chia-tools/raw/master/images/plot05.png)
### 限制阶段1的任务数量
当创建了多个P图任务，此时只会有指定数量的任务处于阶段1执行，其它任务会处于排队中的状态。
### 限制总任务数量
当创建了多个P图任务，此时只会有指定数量的任务执行，其它任务会处于排队中的状态。
### 等待任务100%后再执行下一轮
默认不勾选时，每个任务在最后一步时生成文件时，会自动开启下一轮任务，因为生成文件的过程不占用内存和cpu资源。

当勾选时，每个任务在生成文件完成之后再开启下一轮任务。该功能适合大量并发量的用户，因为大量并发时会多个任务处理生成文件状态，会占用固态硬盘资源。
## HPool和火币矿池挖矿
首先按照矿池的要求输入信息，点击开始挖矿按钮，就可以挖矿了。

挖矿所使用的目录，就是硬盘界面中配置的机械硬盘目录。如果你不想指定的目录用来挖矿，只需要将左边的勾去掉即可。

关于多挖，ChiaTools是不阻止你多挖的，但是并不建议。因为矿池之间会有联系，一旦联合后发现了多挖行为，矿池平台会封禁你的公钥，此时你就只能solo或重新P了。
### 开机自动启动并开始挖矿
当你勾选了任一矿池下的该选项，软件会在开机后自动启动，并在启动之后自动开启挖矿。

### 挖矿进程守护
挖矿程序有时会崩溃，或显示扫盘超时等问题。这时会自动重启挖矿程序以防止离线。
